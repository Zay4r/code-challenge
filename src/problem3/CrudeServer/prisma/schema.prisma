generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

enum ProductType {
  ELECTRONICS
  CLOTHING
  FOOD
  BOOKS
  TOYS
  OTHER
}

enum BrandType {
  LOCAL
  INTERNATIONAL
  LUXURY
  BUDGET
}

model users {
  id                   Int                   @id @default(autoincrement())
  email                String                @unique @db.VarChar(100)
  password             String                @db.VarChar(255)

  del_flg              Int?                  @default(0) @db.TinyInt
  created_at           DateTime?             @default(now()) @db.Timestamp(0)
  updated_at           DateTime?             @default(now()) @db.Timestamp(0)
  user_product         user_product[]
}

model products {
  id                   Int                   @id @default(autoincrement())
  name                 String
  price                Decimal               @db.Decimal(10,2)
  brand_id             Int
  type                 ProductType
  del_flg              Int?                  @default(0) @db.TinyInt
  created_at           DateTime?             @default(now()) @db.Timestamp(0)
  updated_at           DateTime?             @default(now()) @db.Timestamp(0)

  brand                brand                 @relation(fields: [brand_id], references: [id])
  user_product         user_product[]

}

model brand {
  id                   Int                   @id @default(autoincrement())
  name                 String                
  type                 BrandType
  products             products[]
}

model user_product {
  id                   Int                   @id @default(autoincrement())
  user_id              Int                   @db.Int
  product_id           Int
  quantity             Int                   @default(1)
 

  users                users                 @relation(fields: [user_id], references: [id])
  products             products                 @relation(fields: [product_id], references: [id]) 
  @@index([user_id], map: "user_product_user_id_fkey")
  @@index([product_id], map: "user_product_product_id_fkey")
}